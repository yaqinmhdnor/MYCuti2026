<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MYCuti 2026 | Ultimate Multi-State Holiday Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #f0f4f8;
            color: #1e293b;
        }

        .glass {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        .card-shadow {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.02);
        }

        .state-active {
            background: #4f46e5;
            color: white;
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
        }

        .holiday-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .holiday-card:hover {
            transform: scale(1.02);
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        .loading-shimmer {
            background: linear-gradient(90deg, #f3f4f6 25%, #e5e7eb 50%, #f3f4f6 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>

<body class="min-h-screen">

    <!-- Header & State Selector -->
    <header class="glass sticky top-0 z-50 border-b border-slate-200 py-4 px-6 mb-8">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center gap-3">
                <div class="bg-indigo-600 p-2.5 rounded-2xl text-white shadow-lg shadow-indigo-200">
                    <i data-lucide="bike"></i>
                </div>
                <div>
                    <h1 class="text-xl font-extrabold text-slate-900 tracking-tight">MYCuti<span class="text-indigo-600">2026</span></h1>
                    <p class="text-[10px] uppercase font-bold text-slate-400 tracking-widest">Master Travel Planner</p>
                </div>
            </div>

            <div class="flex flex-wrap justify-center gap-2">
                <select id="stateSelect" onchange="updateView()"
                    class="bg-white border border-slate-200 rounded-xl px-4 py-2 text-sm font-semibold text-slate-700 outline-none focus:ring-2 focus:ring-indigo-500 transition-all card-shadow">
                    <optgroup label="Standard Weekend (Sat-Sun)">
                        <option value="Selangor" selected>Selangor</option>
                        <option value="Kuala Lumpur">Kuala Lumpur</option>
                        <option value="Penang">Penang</option>
                        <option value="Perak">Perak</option>
                        <option value="Pahang">Pahang</option>
                        <option value="Negeri Sembilan">Negeri Sembilan</option>
                        <option value="Melaka">Melaka</option>
                        <option value="Perlis">Perlis</option>
                        <option value="Sabah">Sabah</option>
                        <option value="Sarawak">Sarawak</option>
                        <option value="Putrajaya">Putrajaya</option>
                        <option value="Labuan">Labuan</option>
                    </optgroup>
                    <optgroup label="Rest Day Friday (Fri-Sat)">
                        <option value="Johor">Johor</option>
                        <option value="Kedah">Kedah</option>
                        <option value="Kelantan">Kelantan</option>
                        <option value="Terengganu">Terengganu</option>
                    </optgroup>
                </select>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 md:px-8">

        <!-- Hero Dashboard -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-12">
            <!-- Stats -->
            <div class="lg:col-span-2 glass rounded-[2.5rem] p-8 card-shadow flex flex-col justify-center">
                <h2 class="text-3xl md:text-4xl font-extrabold text-slate-900 mb-4">
                    Ride & Rest <span class="text-indigo-600">Strategies</span> for <span id="displayState">Selangor</span>
                </h2>
                <p class="text-slate-600 mb-8 max-w-lg leading-relaxed text-balance">
                    Max out your long weekends with 80km-100km road bike routes. We've calculated every holiday to find your best "Leave Combos".
                </p>
                <div class="flex flex-wrap gap-4">
                    <div class="bg-white p-4 rounded-2xl border border-slate-100 flex-1 min-w-[120px]">
                        <span class="text-slate-400 text-[10px] font-bold uppercase block mb-1">Total PH</span>
                        <span id="statPH" class="text-2xl font-black text-indigo-600">--</span>
                    </div>
                    <div class="bg-white p-4 rounded-2xl border border-slate-100 flex-1 min-w-[120px]">
                        <span class="text-slate-400 text-[10px] font-bold uppercase block mb-1">Long Weekends</span>
                        <span id="statLong" class="text-2xl font-black text-pink-600">--</span>
                    </div>
                    <div class="bg-white p-4 rounded-2xl border border-slate-100 flex-1 min-w-[120px]">
                        <span class="text-slate-400 text-[10px] font-bold uppercase block mb-1">Total Vacation Days</span>
                        <span id="statDays" class="text-2xl font-black text-emerald-600">--</span>
                    </div>
                </div>
            </div>

            <!-- AI Concierge Card -->
            <div class="bg-slate-900 rounded-[2.5rem] p-8 text-white relative overflow-hidden group">
                <div class="relative z-10">
                    <div class="flex items-center gap-2 mb-4 text-indigo-400">
                        <i data-lucide="bike" class="w-5 h-5"></i>
                        <span class="text-xs font-bold uppercase tracking-widest">Cycling Concierge</span>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">Route Scouting</h3>
                    <p class="text-slate-400 text-sm mb-6 leading-relaxed">Generate 100km road bike itineraries and coffee stops for your selected state.</p>
                    <button id="aiBtn" onclick="generateAIInsight()"
                        class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-indigo-500/30">
                        <i data-lucide="map" class="w-4 h-4"></i>
                        Plan 100km Loop
                    </button>
                </div>
                <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-indigo-500/10 rounded-full blur-3xl group-hover:bg-indigo-500/20 transition-all"></div>
            </div>
        </div>

        <!-- AI Insight Display -->
        <div id="aiOutput" class="hidden mb-12 glass rounded-[2rem] p-8 border-2 border-indigo-100 animate-in fade-in slide-in-from-bottom-4 duration-500">
            <div class="flex justify-between items-start mb-6">
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-indigo-100 text-indigo-600 rounded-lg">
                        <i data-lucide="navigation"></i>
                    </div>
                    <h3 class="text-xl font-extrabold" id="aiTitle">Road Bike Itinerary</h3>
                </div>
                <button onclick="closeAI()" class="text-slate-400 hover:text-slate-600">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
            <div id="aiContent" class="text-slate-700 leading-relaxed space-y-4 prose prose-indigo max-w-none"></div>
        </div>

        <!-- Filter Tabs -->
        <div class="flex items-center gap-4 mb-8 overflow-x-auto pb-2 no-scrollbar">
            <button onclick="setFilter('all')" id="filter-all" class="filter-tab state-active px-6 py-2.5 rounded-full text-sm font-bold whitespace-nowrap transition-all">All Holidays</button>
            <button onclick="setFilter('long')" id="filter-long" class="filter-tab bg-white border border-slate-200 text-slate-500 px-6 py-2.5 rounded-full text-sm font-bold whitespace-nowrap transition-all">Long Weekends</button>
            <button onclick="setFilter('leave')" id="filter-leave" class="filter-tab bg-white border border-slate-200 text-slate-500 px-6 py-2.5 rounded-full text-sm font-bold whitespace-nowrap transition-all">Leave Hacks</button>
        </div>

        <!-- Holiday Grid -->
        <div id="holidayGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>

        <!-- Mega Strategy Section -->
        <section class="mt-24 mb-20 bg-slate-900 rounded-[3rem] p-8 md:p-16 text-white relative overflow-hidden">
             <div class="relative z-10">
                <h2 class="text-3xl md:text-5xl font-bold mb-8 text-transparent bg-clip-text bg-gradient-to-r from-indigo-300 to-pink-300">The 2026 "Mega-Block" Tarmac Feast ðŸ§§ðŸŒ™</h2>
                <p class="text-slate-400 mb-12 max-w-2xl text-lg">
                    February 2026 is legendary. CNY (Feb 17-18) and Awal Ramadan (Feb 19) overlap, creating a massive century-ride block.
                </p>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="bg-slate-800/50 p-6 rounded-2xl border border-slate-700">
                        <span class="bg-amber-500/20 text-amber-400 px-3 py-1 rounded-full text-[10px] font-bold mb-4 inline-block tracking-wider uppercase">Endurance Plan</span>
                        <h3 class="text-2xl font-bold mb-2">9 Days for 3 Leaves</h3>
                        <p class="text-slate-300 text-sm">Take Feb 16, 19, & 20. Result: 9 Days Off (Feb 14 - Feb 22).</p>
                    </div>
                    <div class="bg-slate-800/50 p-6 rounded-2xl border border-slate-700">
                        <span class="bg-emerald-500/20 text-emerald-400 px-3 py-1 rounded-full text-[10px] font-bold mb-4 inline-block tracking-wider uppercase">Johor/Kedah/Melaka</span>
                        <h3 class="text-2xl font-bold mb-2">9 Days for 2 Leaves</h3>
                        <p class="text-slate-300 text-sm">Awal Ramadan is a holiday! Take Feb 16 & 20 only for 9 full days off.</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="mt-20 border-t border-slate-200 py-12 px-8">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-6">
            <p class="text-slate-400 text-sm">&copy; 2026 MYCuti Planner. Built for the tarmac.</p>
            <div class="flex gap-6 text-slate-400">
                <a href="#" class="hover:text-indigo-600"><i data-lucide="bike"></i></a>
                <a href="#" class="hover:text-indigo-600"><i data-lucide="map"></i></a>
            </div>
        </div>
    </footer>

    <script>
        const nationalHolidays = [
            { name: "New Year's Day", date: "Jan 1", day: "Thursday", isNational: true },
            { name: "Chinese New Year", date: "Feb 17 - 18", day: "Tue - Wed", isNational: true },
            { name: "Hari Raya Aidilfitri", date: "Mar 20 - 21", day: "Fri - Sat", isNational: true, ganti: "Mar 23 (Mon)" },
            { name: "Labor Day", date: "May 1", day: "Friday", isNational: true },
            { name: "Wesak Day", date: "May 31", day: "Sunday", isNational: true, ganti: "Jun 2 (Tue)" },
            { name: "Agong's Birthday", date: "Jun 1", day: "Monday", isNational: true },
            { name: "Hari Raya Haji", date: "Jun 6", day: "Saturday", isNational: true },
            { name: "Awal Muharram", date: "Jul 28", day: "Tuesday", isNational: true },
            { name: "Merdeka Day", date: "Aug 31", day: "Monday", isNational: true },
            { name: "Malaysia Day", date: "Sep 16", day: "Wednesday", isNational: true },
            { name: "Maulidur Rasul", date: "Oct 6", day: "Tuesday", isNational: true },
            { name: "Deepavali", date: "Nov 8", day: "Sunday", isNational: true, ganti: "Nov 9 (Mon)" },
            { name: "Christmas Day", date: "Dec 25", day: "Friday", isNational: true }
        ];

        const stateSpecific = {
            "Selangor": [
                { name: "Thaipusam", date: "Feb 1", day: "Sunday", ganti: "Feb 2 (Mon)" },
                { name: "Nuzul Al-Quran", date: "Mar 7", day: "Saturday" },
                { name: "Sultan's Birthday", date: "Dec 11", day: "Friday" }
            ],
            "Kuala Lumpur": [
                { name: "Federal Territory Day", date: "Feb 1", day: "Sunday", ganti: "Feb 2 (Mon)" },
                { name: "Thaipusam", date: "Feb 1", day: "Sunday", ganti: "Feb 2 (Mon)" }
            ],
            "Putrajaya": [ { name: "Federal Territory Day", date: "Feb 1", day: "Sunday", ganti: "Feb 2 (Mon)" } ],
            "Labuan": [ { name: "Federal Territory Day", date: "Feb 1", day: "Sunday", ganti: "Feb 2 (Mon)" } ],
            "Penang": [
                { name: "Thaipusam", date: "Feb 1", day: "Sunday", ganti: "Feb 2 (Mon)" },
                { name: "UNESCO Heritage Day", date: "Jul 7", day: "Tuesday" },
                { name: "Governor Birthday", date: "Jul 11", day: "Saturday" }
            ],
            "Johor": [
                { name: "Thaipusam", date: "Feb 1", day: "Sunday" },
                { name: "Awal Ramadan", date: "Feb 19", day: "Thursday" },
                { name: "Sultan Johor Birthday", date: "Mar 23", day: "Monday" }
            ],
            "Kedah": [
                { name: "Israk Mikraj", date: "Feb 16", day: "Monday" },
                { name: "Awal Ramadan", date: "Feb 19", day: "Thursday" },
                { name: "Sultan Kedah Birthday", date: "Jun 21", day: "Sunday" }
            ],
            "Kelantan": [ { name: "Sultan Kelantan Birthday", date: "Sep 29 - 30", day: "Tue - Wed" } ],
            "Terengganu": [
                { name: "Installation of Sultan", date: "Mar 4", day: "Wednesday" },
                { name: "Sultan Terengganu Birthday", date: "Apr 26", day: "Sunday" }
            ],
            "Perak": [
                { name: "Thaipusam", date: "Feb 1", day: "Sunday", ganti: "Feb 2 (Mon)" },
                { name: "Sultan Perak Birthday", date: "Nov 6", day: "Friday" }
            ],
            "Pahang": [
                { name: "Hol Day of Pahang", date: "May 22", day: "Friday" },
                { name: "Sultan Pahang Birthday", date: "Jul 30", day: "Thursday" }
            ],
            "Negeri Sembilan": [ { name: "Yang di-Pertuan Besar Bday", date: "Jan 14", day: "Wednesday" } ],
            "Melaka": [
                { name: "Awal Ramadan", date: "Feb 19", day: "Thursday" },
                { name: "Malacca Historic City Day", date: "Apr 15", day: "Wednesday" },
                { name: "Governor's Birthday", date: "Aug 24", day: "Monday" }
            ],
            "Perlis": [ { name: "Raja Perlis Birthday", date: "Jul 17", day: "Friday" } ],
            "Sabah": [
                { name: "Good Friday", date: "Apr 3", day: "Friday" },
                { name: "Harvest Festival (Kaamatan)", date: "May 30 - 31", day: "Sat - Sun" },
                { name: "Governor Birthday", date: "Oct 3", day: "Saturday" }
            ],
            "Sarawak": [
                { name: "Good Friday", date: "Apr 3", day: "Friday" },
                { name: "Gawai Dayak", date: "Jun 1 - 2", day: "Mon - Tue" },
                { name: "Sarawak Day", date: "Jul 22", day: "Wednesday" },
                { name: "Governor Birthday", date: "Oct 10", day: "Saturday" }
            ]
        };

        let currentFilter = 'all';

        function updateView() {
            const state = document.getElementById('stateSelect').value;
            document.getElementById('displayState').innerText = state;
            const holidays = [...nationalHolidays, ...(stateSpecific[state] || [])];
            renderGrid(holidays, state);
        }

        function calculateHack(h) {
            if (h.ganti || h.day.includes("Friday") || h.day.includes("Monday")) return "Direct Century Ride Opportunity!";
            if (h.day.includes("Thursday")) return "Take Fri off: 4-day tour!";
            if (h.day.includes("Tuesday")) return "Take Mon off: Weekend + Ride!";
            if (h.name.includes("Wesak") || h.name.includes("Agong")) return "5-Day Base Miles Mega-Combo!";
            return "Mid-week break or interval day.";
        }

        function renderGrid(holidays, state) {
            const grid = document.getElementById('holidayGrid');
            grid.innerHTML = '';
            let longCount = 0;

            const filtered = holidays.filter(h => {
                const isLong = h.ganti || h.day.includes("Friday") || h.day.includes("Monday") || h.name.includes("Agong") || h.name.includes("Wesak") || h.name.includes("Gawai");
                if (currentFilter === 'long' && !isLong) return false;
                if (currentFilter === 'leave' && !h.day.includes("Tue") && !h.day.includes("Thu")) return false;
                return true;
            });

            filtered.sort((a, b) => new Date(a.date + " 2026") - new Date(b.date + " 2026")).forEach(h => {
                const isLong = h.ganti || h.day.includes("Friday") || h.day.includes("Monday") || h.name.includes("Agong") || h.name.includes("Wesak") || h.name.includes("Gawai");
                if (isLong) longCount++;

                const card = `
                    <div class="holiday-card glass rounded-[2.5rem] p-7 flex flex-col card-shadow border border-white relative overflow-hidden">
                        ${isLong ? '<div class="absolute -top-2 -right-2 bg-indigo-600 text-white text-[10px] font-bold px-4 py-3 rounded-bl-3xl uppercase">LONG RIDE</div>' : ''}
                        <div class="mb-4">
                            <span class="text-[10px] font-extrabold tracking-widest text-slate-400 uppercase">${h.isNational ? 'National' : state}</span>
                            <h3 class="text-xl font-extrabold text-slate-800 leading-tight mt-1">${h.name}</h3>
                        </div>
                        <div class="mb-6">
                            <div class="flex items-center gap-2 text-indigo-600 font-bold text-sm">
                                <i data-lucide="calendar" class="w-4 h-4"></i>
                                <span>${h.date} (${h.day})</span>
                            </div>
                        </div>
                        <div class="mt-auto bg-slate-50 p-4 rounded-2xl border border-slate-100 group">
                            <div class="flex gap-2 items-start">
                                <i data-lucide="zap" class="w-4 h-4 text-amber-500 shrink-0 mt-0.5"></i>
                                <div>
                                    <p class="text-[10px] font-bold text-slate-400 uppercase">Cycling Hack</p>
                                    <p class="text-sm font-semibold text-slate-700">${calculateHack(h)}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                grid.insertAdjacentHTML('beforeend', card);
            });

            document.getElementById('statPH').innerText = holidays.length;
            document.getElementById('statLong').innerText = longCount;
            document.getElementById('statDays').innerText = holidays.length + (longCount * 2);
            lucide.createIcons();
        }

        function setFilter(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filter-tab').forEach(btn => btn.className = 'filter-tab bg-white border border-slate-200 text-slate-500 px-6 py-2.5 rounded-full text-sm font-bold whitespace-nowrap transition-all');
            document.getElementById('filter-' + filter).className = 'filter-tab state-active px-6 py-2.5 rounded-full text-sm font-bold whitespace-nowrap transition-all';
            updateView();
        }

        async function generateAIInsight() {
            const state = document.getElementById('stateSelect').value;
            const btn = document.getElementById('aiBtn');
            const output = document.getElementById('aiOutput');
            const content = document.getElementById('aiContent');

            btn.disabled = true;
            btn.innerHTML = `<span class="animate-spin"><i data-lucide="refresh-cw"></i></span> Scouting Routes...`;
            lucide.createIcons();

            const prompt = `Act as an expert Malaysian cycling concierge. Create a 3-day road cycling itinerary for a resident of ${state} during their long weekend in 2026. 
            Strictly focus on road bike routes with average distance 80km - 100km return. Mention specific route names/loops near ${state}. 
            Include elevation profiles, popular cycling-friendly coffee stops, and a safety note about the Feb 2026 CNY/Ramadan overlap traffic.`;

            const apiKey = "";
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            try {
                const response = await fetchWithRetry(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });

                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text || "Check back later!";

                output.classList.remove('hidden');
                document.getElementById('aiTitle').innerText = `${state} Century Loop Guide`;
                
                content.innerHTML = text.split('\n').map(line => {
                    if (line.startsWith('###')) return `<h4 class="text-lg font-bold text-slate-900 mt-4">${line.replace('###', '')}</h4>`;
                    if (line.startsWith('**')) return `<p class="font-bold text-indigo-600">${line.replaceAll('**', '')}</p>`;
                    if (line.startsWith('-')) return `<li class="ml-4 text-slate-600">${line.replace('-', '')}</li>`;
                    return `<p class="text-slate-600">${line}</p>`;
                }).join('');

                output.scrollIntoView({ behavior: 'smooth' });
            } catch (error) {
                content.innerHTML = `<div class="p-4 bg-red-50 text-red-600 rounded-xl">Scouting report failed. Check your data connection.</div>`;
                output.classList.remove('hidden');
            } finally {
                btn.disabled = false;
                btn.innerHTML = `<i data-lucide="map" class="w-4 h-4"></i> Plan 100km Loop`;
                lucide.createIcons();
            }
        }

        async function fetchWithRetry(url, options, retries = 5, backoff = 1000) {
            try {
                const res = await fetch(url, options);
                if (!res.ok) throw new Error();
                return res;
            } catch (err) {
                if (retries > 0) {
                    await new Promise(r => setTimeout(r, backoff));
                    return fetchWithRetry(url, options, retries - 1, backoff * 2);
                }
                throw err;
            }
        }

        function closeAI() {
            document.getElementById('aiOutput').classList.add('hidden');
        }

        window.onload = () => {
            updateView();
            lucide.createIcons();
        };
    </script>
</body>

</html>
